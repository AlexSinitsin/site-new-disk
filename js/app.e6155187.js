(function(){"use strict";var s={3822:function(s,t,e){var a=e(7195),r=function(){var s=this,t=s._self._c;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"wrap"},[t("HeaderBox",{on:{openModalLogIn:s.openModalLogIn}}),t("div",{staticClass:"pages"},[s.isAuth?t("TasksPage",{on:{openModal:s.openModalAddTask}}):t("MainPage")],1),t("Modal",{attrs:{close:s.isCloseModalComp||s.isOpenModalLogInComp,top:s.isModalTypeComp},on:{close:s.closeModal}},[t(s.isModalTypeComp,{tag:"component",on:{openModal:s.openModal,closeModal:s.closeModal}})],1)],1)])},o=[],i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"header"},[t("router-link",{staticClass:"logo",attrs:{to:"/"}},[s.isAuth?t("div",{staticClass:"logo-auth"}):t("img",{attrs:{src:e(9574),alt:"img"}})]),t("div",{staticClass:"right-box"},[s.isAuth?t("div",{staticClass:"user",on:{click:s.logOut}},[t("span",[s._v(s._s(s.user.email))]),s._m(0),t("div",{staticClass:"popup"},[s._v("Выйти")])]):t("div",{staticClass:"log-in",on:{click:function(t){return s.$emit("openModalLogIn")}}},[t("img",{attrs:{src:e(7515),alt:"img"}}),t("span",[s._v("Вход")])])])],1)},n=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"logo-user"},[t("img",{attrs:{src:e(5730),alt:"img"}})])}],l={name:"HeaderBox",components:{},computed:{user(){return this.$store.getters.user},isAuth(){return this.$store.getters.isAuth}},methods:{logOut(){this.$store.dispatch("LOG_OUT")}}},c=l,d=e(1001),p=(0,d.Z)(c,i,n,!1,null,null,null),u=p.exports,m=function(){var s=this,t=s._self._c;return s.close?t("div",{staticClass:"modal"},[t("div",{staticClass:"background",on:{click:function(t){return s.$emit("close")}}}),t("div",{class:["body-modal",s.top]},[t("div",{staticClass:"close-button",on:{click:function(t){return s.$emit("close")}}},[s._m(0)]),s._t("default")],2)]):s._e()},h=[function(){var s=this,t=s._self._c;return t("div",[t("img",{attrs:{src:e(3342),alt:"img"}})])}],v={name:"ModalBox",components:{},props:["close","top"],methods:{}},g=v,w=(0,d.Z)(g,m,h,!1,null,null,null),f=w.exports,k=function(){var s=this,t=s._self._c;return t("div",{staticClass:"template-modal template-log-in"},[t("h2",[s._v("Вход в ваш аккаунт")]),t("div",{staticClass:"input-box"},[t("label",{attrs:{for:""}},[s._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:s.email,expression:"email"}],attrs:{type:"email",placeholder:"Введите значение"},domProps:{value:s.email},on:{input:function(t){t.target.composing||(s.email=t.target.value)}}})]),t("div",{staticClass:"input-box"},[t("label",{attrs:{for:""}},[s._v("Пароль")]),t("div",{staticClass:"wrap-input"},["checkbox"===s.typeInputPassword?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],attrs:{placeholder:"Введите пароль",type:"checkbox"},domProps:{checked:Array.isArray(s.password)?s._i(s.password,null)>-1:s.password},on:{change:function(t){var e=s.password,a=t.target,r=!!a.checked;if(Array.isArray(e)){var o=null,i=s._i(e,o);a.checked?i<0&&(s.password=e.concat([o])):i>-1&&(s.password=e.slice(0,i).concat(e.slice(i+1)))}else s.password=r}}}):"radio"===s.typeInputPassword?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],attrs:{placeholder:"Введите пароль",type:"radio"},domProps:{checked:s._q(s.password,null)},on:{change:function(t){s.password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],attrs:{placeholder:"Введите пароль",type:s.typeInputPassword},domProps:{value:s.password},on:{input:function(t){t.target.composing||(s.password=t.target.value)}}}),t("div",{staticClass:"visible-input",on:{click:s.toggleVisiblePassword}},[s.visiblePasswordComp?t("img",{staticClass:"img-1",attrs:{src:e(6854),alt:"img"}}):t("img",{staticClass:"img-2",attrs:{src:e(8261),alt:"img"}})])])]),t("div",{staticClass:"button-box"},[t("p",[s._v(" У вас нет аккаунта? "),t("span",{on:{click:function(t){return s.$emit("openModal","reg")}}},[s._v("Зарегистрируйтесь")])]),t("div",{staticClass:"button",on:{click:s.auth}},[s._v("Войти")])]),s.error?t("div",{staticClass:"error"},[s._v(s._s(s.error))]):s._e()])},C=[],y={name:"TamplateLogIn",components:{},data(){return{visiblePassword:!1,typeInputPassword:"password",email:"",password:""}},computed:{visiblePasswordComp(){return this.visiblePassword},typeInputPasswordComp(){return this.typeInputPassword},error(){return this.$store.getters.error}},methods:{toggleVisiblePassword(){this.visiblePasswordComp?(this.typeInputPassword="password",this.visiblePassword=!1):(this.typeInputPassword="text",this.visiblePassword=!0)},auth(){this.$store.dispatch("AUTH",{email:this.email,password:this.password}).then((()=>{this.error||(this.email="",this.password="",this.$emit("closeModal"),this.$store.dispatch("GET_USER"))}))}}},_=y,P=(0,d.Z)(_,k,C,!1,null,null,null),b=P.exports,T=function(){var s=this,t=s._self._c;return t("div",{staticClass:"template-modal template-reg"},[t("h2",[s._v("Регистрация")]),t("div",{staticClass:"input-box"},[t("label",{attrs:{for:""}},[s._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:s.email,expression:"email"}],attrs:{type:"email",placeholder:"Введите Email"},domProps:{value:s.email},on:{input:function(t){t.target.composing||(s.email=t.target.value)}}})]),t("div",{staticClass:"input-box"},[t("label",{attrs:{for:""}},[s._v("Пароль")]),t("div",{staticClass:"wrap-input"},["checkbox"===s.typeInputPassword?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],attrs:{placeholder:"Введите пароль",type:"checkbox"},domProps:{checked:Array.isArray(s.password)?s._i(s.password,null)>-1:s.password},on:{change:function(t){var e=s.password,a=t.target,r=!!a.checked;if(Array.isArray(e)){var o=null,i=s._i(e,o);a.checked?i<0&&(s.password=e.concat([o])):i>-1&&(s.password=e.slice(0,i).concat(e.slice(i+1)))}else s.password=r}}}):"radio"===s.typeInputPassword?t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],attrs:{placeholder:"Введите пароль",type:"radio"},domProps:{checked:s._q(s.password,null)},on:{change:function(t){s.password=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],attrs:{placeholder:"Введите пароль",type:s.typeInputPassword},domProps:{value:s.password},on:{input:function(t){t.target.composing||(s.password=t.target.value)}}}),t("div",{staticClass:"visible-input",on:{click:s.toggleVisiblePassword}},[s.visiblePasswordComp?t("img",{staticClass:"img-1",attrs:{src:e(6854),alt:"img"}}):t("img",{staticClass:"img-2",attrs:{src:e(8261),alt:"img"}})])])]),t("div",{staticClass:"input-box"},[t("label",{attrs:{for:""}},[s._v("Пароль ещё раз")]),t("div",{staticClass:"wrap-input"},["checkbox"===s.typeInputConfirmPassword?t("input",{directives:[{name:"model",rawName:"v-model",value:s.confirmPassword,expression:"confirmPassword"}],attrs:{placeholder:"Введите пароль ещё раз",type:"checkbox"},domProps:{checked:Array.isArray(s.confirmPassword)?s._i(s.confirmPassword,null)>-1:s.confirmPassword},on:{change:function(t){var e=s.confirmPassword,a=t.target,r=!!a.checked;if(Array.isArray(e)){var o=null,i=s._i(e,o);a.checked?i<0&&(s.confirmPassword=e.concat([o])):i>-1&&(s.confirmPassword=e.slice(0,i).concat(e.slice(i+1)))}else s.confirmPassword=r}}}):"radio"===s.typeInputConfirmPassword?t("input",{directives:[{name:"model",rawName:"v-model",value:s.confirmPassword,expression:"confirmPassword"}],attrs:{placeholder:"Введите пароль ещё раз",type:"radio"},domProps:{checked:s._q(s.confirmPassword,null)},on:{change:function(t){s.confirmPassword=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:s.confirmPassword,expression:"confirmPassword"}],attrs:{placeholder:"Введите пароль ещё раз",type:s.typeInputConfirmPassword},domProps:{value:s.confirmPassword},on:{input:function(t){t.target.composing||(s.confirmPassword=t.target.value)}}}),t("div",{staticClass:"visible-input",on:{click:s.toggleVisibleConfirmPassword}},[s.visibleConfirmPasswordComp?t("img",{staticClass:"img-1",attrs:{src:e(6854),alt:"img"}}):t("img",{staticClass:"img-2",attrs:{src:e(8261),alt:"img"}})])])]),t("div",{staticClass:"button-box"},[t("p",[s._v(" У вас нет аккаунта? "),t("span",{on:{click:function(t){return s.$emit("openModal","logIn")}}},[s._v("Войдите")])]),t("div",{staticClass:"button",on:{click:s.registration}},[s._v("Зарегистрироваться")])]),s.error?t("div",{staticClass:"error"},[s._v(s._s(s.error))]):s._e()])},x=[],A={name:"TamplateReg",components:{},data(){return{visiblePassword:!1,typeInputPassword:"password",visibleConfirmPassword:!1,typeInputConfirmPassword:"password",email:"",password:"",confirmPassword:""}},computed:{visiblePasswordComp(){return this.visiblePassword},typeInputPasswordComp(){return this.typeInputPassword},visibleConfirmPasswordComp(){return this.visibleConfirmPassword},typeInputConfirmPasswordComp(){return this.typeInputConfirmPassword},error(){return this.$store.getters.error}},methods:{toggleVisiblePassword(){this.visiblePasswordComp?(this.typeInputPassword="password",this.visiblePassword=!1):(this.typeInputPassword="text",this.visiblePassword=!0)},toggleVisibleConfirmPassword(){this.visibleConfirmPasswordComp?(this.typeInputConfirmPassword="password",this.visibleConfirmPassword=!1):(this.typeInputConfirmPassword="text",this.visibleConfirmPassword=!0)},registration(){this.$store.dispatch("REGISTRATION",{email:this.email,password:this.password,confirm_password:this.confirmPassword}).then((()=>{this.error||(this.email="",this.password="",this.confirmPassword="",this.$emit("openModal","logIn"))}))}}},I=A,M=(0,d.Z)(I,T,x,!1,null,null,null),O=M.exports,E=function(){var s=this,t=s._self._c;return t("div",{staticClass:"template-add-task"},[t("h2",[s._v("Добавление заметки")]),t("div",{staticClass:"input-box"},[t("label",{attrs:{for:""}},[s._v("Название заметки")]),t("input",{directives:[{name:"model",rawName:"v-model",value:s.title,expression:"title"}],attrs:{type:"text",placeholder:"Введите название"},domProps:{value:s.title},on:{input:[function(t){t.target.composing||(s.title=t.target.value)},s.changeTitle]}}),t("p",{staticClass:"counter"},[t("span",[s._v(s._s(s.titleCount))]),s._v("/64 ")])]),t("div",{staticClass:"input-box"},[t("label",{attrs:{for:""}},[s._v("Текст заметки")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:s.desk,expression:"desk"}],attrs:{placeholder:"Введите значение"},domProps:{value:s.desk},on:{input:[function(t){t.target.composing||(s.desk=t.target.value)},s.changeDesk]}}),t("p",{staticClass:"counter"},[t("span",[s._v(s._s(s.deskCount))]),s._v("/255 ")])]),t("div",{staticClass:"button-box"},[t("div",{staticClass:"button",on:{click:s.auth}},[s._v("Добавить")])]),s.error?t("div",{staticClass:"error"},[s._v(s._s(s.error))]):s._e()])},S=[],$={name:"TamplateAddTask",components:{},data(){return{title:"",desk:"",titleCount:0,deskCount:0}},computed:{error(){return this.$store.getters.error}},methods:{changeTitle(){this.titleCount=this.title.length,this.title.length>64&&(this.title=this.title.slice(0,-1),this.titleCount=this.title.length)},changeDesk(){this.deskCount=this.desk.length,this.desk.length>255&&(this.desk=this.desk.slice(0,-1),this.deskCount=this.desk.length)},auth(){this.$store.dispatch("CREATE_TASK",{title:this.title,content:this.desk}).then((()=>{this.error||(this.title="",this.desk="",this.titleCount=0,this.deskCount=0,this.$emit("closeModal"))}))}}},N=$,L=(0,d.Z)(N,E,S,!1,null,null,null),Z=L.exports,q=function(){var s=this;s._self._c;return s._m(0)},B=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"main-page"},[t("div",{staticClass:"left-box"},[t("h1",[s._v("Мои заметки")]),t("p",[s._v("Не забывай о важном, храни его в облаке.")])]),t("div",{staticClass:"right-box"},[t("img",{attrs:{src:e(7980),alt:"img"}})])])}],R={name:"MainPage",components:{}},U=R,G=(0,d.Z)(U,q,B,!1,null,null,null),J=G.exports,j=function(){var s=this,t=s._self._c;return t("div",{staticClass:"tasks-page"},[t("div",{staticClass:"tasks"},s._l(s.tasks,(function(s){return t("TaskBox",{key:s.id,attrs:{task:s}})})),1),t("div",{staticClass:"button-add-task",on:{click:function(t){return s.$emit("openModal","addTask")}}},[t("img",{attrs:{src:e(5443),alt:"img"}})])])},K=[],V=function(){var s=this,t=s._self._c;return t("div",{staticClass:"task"},[t("div",{staticClass:"wrap-task"},[t("div",{staticClass:"title"},[s._v(s._s(s.task.title))]),t("div",{staticClass:"desk"},[s._v(s._s(s.task.content))]),t("div",{staticClass:"button-box"},[t("div",{staticClass:"button",on:{click:function(t){return s.deleteTask(s.task.id)}}},[t("img",{attrs:{src:e(3342),alt:"img"}}),t("span",[s._v("Удалить")])])])])])},z=[],H={name:"TaskBox",props:["task"],components:{},methods:{deleteTask(s){this.$store.dispatch("DELETE_TASK",s)}}},D=H,F=(0,d.Z)(D,V,z,!1,null,null,null),Q=F.exports,W={name:"TasksPage",components:{TaskBox:Q},computed:{tasks(){return this.$store.getters.tasks}},mounted(){this.$store.dispatch("GET_TASKS")}},X=W,Y=(0,d.Z)(X,j,K,!1,null,null,null),ss=Y.exports,ts={name:"App",components:{HeaderBox:u,Modal:f,TemplateLogIn:b,TemplateReg:O,MainPage:J,TasksPage:ss,TemplateAddTask:Z},data(){return{isOpenModalLogIn:!1,isCloseModal:!1,modalType:{logIn:"TemplateLogIn",reg:"TemplateReg",addTask:"TemplateAddTask"},isModalType:"TemplateLogIn"}},computed:{isOpenModalLogInComp(){return this.isOpenModalLogIn},isCloseModalComp(){return this.isCloseModal},isModalTypeComp(){return this.isModalType},isAuth(){return this.$store.getters.isAuth}},methods:{openModalLogIn(){this.isOpenModalLogIn=!0,this.isModalType=this.modalType["logIn"]},closeModal(){this.isCloseModal=!1,this.isOpenModalLogIn=!1},openModal(s){this.isModalType=this.modalType[s],this.isCloseModal=!0},openModalAddTask(s){this.isModalType=this.modalType[s],this.isCloseModal=!0}}},es=ts,as=(0,d.Z)(es,r,o,!1,null,null,null),rs=as.exports,os=e(1534),is=e.n(os),ns=e(6006),ls=e(4582);console.log(ls.Z);const cs=ls.Z.create({baseURL:"https://dist.nd.ru/api"});var ds=cs;class ps{static async registration(s){return await ds.post("/reg",s)}static async auth(s){return await ds.post("/auth",s)}static async getUser(s){return await ds.get("/auth",{params:{},headers:{Authorization:`Bearer ${s}`}})}static async logOut(s){return await ds.delete("/auth",{data:{},headers:{Authorization:`Bearer ${s}`}})}}var us=ps;const ms={user:{},token:"",isAuth:!1,error:""},hs={setToken(s,t){s.token=t},setUser(s,t){s.user=t},setIsAuth(s,t){s.isAuth=t},setError(s,t){s.error=t}},vs={REGISTRATION:async({commit:s},t)=>{s("setError","");try{return await us.registration(t),!0}catch(e){let t=Array.isArray(JSON.parse(e.request.response).message)?JSON.parse(e.request.response).message[0]:JSON.parse(e.request.response).message;return void s("setError",t)}},AUTH:async({commit:s},t)=>{s("setError","");try{const{data:e}=await us.auth(t);return console.log(e),s("setToken",e.accessToken),s("setIsAuth",!0),!0}catch(e){let t=Array.isArray(JSON.parse(e.request.response).message)?JSON.parse(e.request.response).message[0]:JSON.parse(e.request.response).message;return void s("setError",t)}},GET_USER:async({commit:s,getters:t})=>{s("setError","");try{const{data:e}=await us.getUser(t.token);return console.log(e),s("setUser",e),!0}catch(e){console.log(e)}},LOG_OUT:async({commit:s,getters:t})=>{s("setError","");try{return await us.logOut(t.token),s("setToken",""),s("setIsAuth",!1),s("setUser",{}),!0}catch(e){console.log(e)}}},gs={error:s=>s.error,isAuth:s=>s.isAuth,token:s=>s.token,user:s=>s.user};var ws={state:ms,mutations:hs,actions:vs,getters:gs};class fs{static async getTasks(s){return await ds.get("/notes",{params:{},headers:{Authorization:`Bearer ${s}`}})}static async createTask(s,t){return await ds.post("/notes",s,{headers:{Authorization:`Bearer ${t}`}})}static async deleteTask(s,t){return await ds.delete(`/notes/${s}`,{data:{},headers:{Authorization:`Bearer ${t}`}})}}var ks=fs;const Cs={tasks:[]},ys={setTasks(s,t){s.tasks=t}},_s={GET_TASKS:async({commit:s,getters:t})=>{s("setError","");try{const{data:e}=await ks.getTasks(t.token);return s("setTasks",e),!0}catch(e){console.log(e)}},CREATE_TASK:async({commit:s,dispatch:t,getters:e},a)=>{s("setError","");try{return await ks.createTask(a,e.token),t("GET_TASKS"),!0}catch(r){let t=Array.isArray(JSON.parse(r.request.response).message)?JSON.parse(r.request.response).message[0]:JSON.parse(r.request.response).message;return void s("setError",t)}},DELETE_TASK:async({commit:s,dispatch:t,getters:e},a)=>{s("setError","");try{return await ks.deleteTask(a,e.token),t("GET_TASKS"),!0}catch(r){console.log(r)}}},Ps={tasks:s=>s.tasks};var bs={state:Cs,mutations:ys,actions:_s,getters:Ps};a.ZP.use(is());var Ts=new(is().Store)({state:{},getters:{},mutations:{},actions:{},modules:{auth:ws,tasks:bs},plugins:[(0,ns.Z)({key:"disk",paths:["auth","tasks"]})]});a.ZP.config.productionTip=!1,new a.ZP({store:Ts,render:s=>s(rs)}).$mount("#app")},5443:function(s,t,e){s.exports=e.p+"img/cross-2.e726d258.svg"},3342:function(s,t,e){s.exports=e.p+"img/cross.f47b2412.svg"},8261:function(s,t,e){s.exports=e.p+"img/glas-none.6814fd08.svg"},6854:function(s,t,e){s.exports=e.p+"img/glas.6a592bc1.svg"},7515:function(s,t,e){s.exports=e.p+"img/logIn.03c06e88.svg"},9574:function(s,t,e){s.exports=e.p+"img/logo.c30495fa.svg"},7980:function(s,t,e){s.exports=e.p+"img/main-img.8791fe58.svg"},5730:function(s,t,e){s.exports=e.p+"img/user.42bdb5d4.svg"}},t={};function e(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return s[a].call(o.exports,o,o.exports,e),o.exports}e.m=s,function(){var s=[];e.O=function(t,a,r,o){if(!a){var i=1/0;for(d=0;d<s.length;d++){a=s[d][0],r=s[d][1],o=s[d][2];for(var n=!0,l=0;l<a.length;l++)(!1&o||i>=o)&&Object.keys(e.O).every((function(s){return e.O[s](a[l])}))?a.splice(l--,1):(n=!1,o<i&&(i=o));if(n){s.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=s.length;d>0&&s[d-1][2]>o;d--)s[d]=s[d-1];s[d]=[a,r,o]}}(),function(){e.n=function(s){var t=s&&s.__esModule?function(){return s["default"]}:function(){return s};return e.d(t,{a:t}),t}}(),function(){e.d=function(s,t){for(var a in t)e.o(t,a)&&!e.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:t[a]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(s){if("object"===typeof window)return window}}()}(),function(){e.o=function(s,t){return Object.prototype.hasOwnProperty.call(s,t)}}(),function(){e.r=function(s){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})}}(),function(){e.p="./"}(),function(){var s={143:0};e.O.j=function(t){return 0===s[t]};var t=function(t,a){var r,o,i=a[0],n=a[1],l=a[2],c=0;if(i.some((function(t){return 0!==s[t]}))){for(r in n)e.o(n,r)&&(e.m[r]=n[r]);if(l)var d=l(e)}for(t&&t(a);c<i.length;c++)o=i[c],e.o(s,o)&&s[o]&&s[o][0](),s[o]=0;return e.O(d)},a=self["webpackChunknew_disk"]=self["webpackChunknew_disk"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=e.O(void 0,[998],(function(){return e(3822)}));a=e.O(a)})();
//# sourceMappingURL=app.e6155187.js.map